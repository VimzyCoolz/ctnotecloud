<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CT NoteCloud</title>
<style>
  body { font-family: Arial, sans-serif; margin:0; background:#f4f4f4; }
  header { background:#1e1e2f; color:#fff; padding:15px; text-align:center; font-size:20px; }
  nav { display:flex; background:#2c2c3e; }
  nav button { flex:1; padding:12px; border:none; background:none; color:#fff; cursor:pointer; }
  nav button.active { background:#4a4aff; }
  .tab { display:none; padding:15px; }
  .tab.active { display:block; }
  textarea { width:100%; height:200px; padding:10px; font-size:14px; }
  .btn { margin-top:10px; padding:10px 15px; background:#4a4aff; color:#fff; border:none; cursor:pointer; }
  ul { list-style:none; padding:0; }
  li { background:#fff; padding:10px; margin-bottom:5px; border-radius:4px; }
</style>
</head>
<body>

<header>CT NoteCloud</header>

<nav>
  <button class="active" onclick="openTab('notes')">Notes</button>
  <button onclick="openTab('saved')">Saved</button>
  <button onclick="openTab('search')">Search</button>
  <button onclick="openTab('profile')">Profile</button>
  <button onclick="openTab('settings')">Settings</button>
  <button onclick="openTab('about')">About</button>
</nav>

<!-- NOTES -->
<div id="notes" class="tab active">
  <h3>Write Note</h3>
  <textarea id="noteInput" placeholder="Write your note here..."></textarea>
  <br>
  <button class="btn" onclick="saveNote()">Save Note</button>
</div>

<!-- SAVED NOTES -->
<div id="saved" class="tab">
  <h3>Saved Notes</h3>
  <ul id="notesList"></ul>
</div>

<!-- SEARCH -->
<div id="search" class="tab">
  <h3>Search Notes</h3>
  <input type="text" id="searchInput" placeholder="Search..." style="width:100%;padding:8px;">
  <ul id="searchResults"></ul>
</div>

<!-- PROFILE -->
<div id="profile" class="tab">
  <h3>Profile</h3>
  <p>Profile Picture</p>
  <input type="file">
  <p>Username</p>
  <p>Email</p>
</div>

<!-- SETTINGS -->
<div id="settings" class="tab">
  <h3>Settings</h3>
  <label>
    <input type="checkbox"> Dark Mode
  </label>
  <br><br>
  <label>
    Font Size
    <select>
      <option>Small</option>
      <option selected>Medium</option>
      <option>Large</option>
    </select>
  </label>
</div>

<!-- ABOUT -->
<div id="about" class="tab">
  <h3>About</h3>
  <p><strong>CT NoteCloud</strong></p>
  <p>Simple cloud-based notebook</p>
  <p>Version 1.0</p>
  <p>Powered by CoolzTech</p>
</div>

<script>
function openTab(tabId) {
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
  document.getElementById(tabId).classList.add('active');
  event.target.classList.add('active');
}

// Save note — only calls existing backend if it exists
async function saveNote() {
  const content = document.getElementById("noteInput").value;
  if (!content) return alert("Write something first!");
  
  try {
    await fetch("/notes", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ content })
    });
  } catch(e) {
    console.warn("Saving might not work if backend not set up.");
  }

  document.getElementById("noteInput").value = "";
  loadNotes();
}

// Load saved notes — only works if backend exists
async function loadNotes() {
  try {
    const res = await fetch("/notes");
    const notes = await res.json();

    const list = document.getElementById("notesList");
    list.innerHTML = "";

    if(notes.length === 0) {
      const li = document.createElement("li");
      li.textContent = "No saved notes yet.";
      list.appendChild(li);
      return;
    }

    notes.forEach(note => {
      const li = document.createElement("li");
      li.textContent = note.content;
      list.appendChild(li);
    });
  } catch(e) {
    const list = document.getElementById("notesList");
    list.innerHTML = "<li>Backend not connected. Notes will not be saved online.</li>";
  }
}

// Basic search (frontend only)
document.getElementById("searchInput").addEventListener("input", function() {
  const term = this.value.toLowerCase();
  const items = document.querySelectorAll("#notesList li");
  const results = document.getElementById("searchResults");
  results.innerHTML = "";
  items.forEach(li => {
    if(li.textContent.toLowerCase().includes(term)) {
      const r = document.createElement("li");
      r.textContent = li.textContent;
      results.appendChild(r);
    }
  });
});

loadNotes();
</script>

</body>
</html>
